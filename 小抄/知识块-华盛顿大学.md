
#### 1. 中心极限定理/正态分布线性变换/正态分布标准化/伯努利实验

![[a68eded5-0e3c-4546-aa20-39c5068e170f.png]]
- $X_i, i \in \mathbb{N}, i \leq 170$ ~ $B(1,p)$ - X 是乘客是否上飞机，一共170个乘客
- **对于伯努利分布**，$\mu = p, \sigma^2 = p \cdot (1-p)$        --- 相当于二项分布 $n = 1$
- **中心极限定理**（CLT）：
	- 有 $Xi,\mathbb{E}(X_i)=\mu,Var(X_i)=\sigma^2$
	- $\bar{X} = \frac{1}{n}\Sigma_{i=1}^nXi$ ~ $N(\mu,\frac{\sigma^2}{n})$，随机变量均值服从正态分布
	- $S_n$ ~ $N(np, n\sigma^2)$，随机变量和服从正态分布，可以看为均值的**线性变换**，即$\bar{X} \times n = S_n$
- 令 $Y=S_n$，即上飞机的人数（对于每个乘客，上飞机为1，不上飞机为0，因此求和就是上飞机的人数）
- 所以，$Y$ ~ $N(np,np(1-p))$，这里 $n = 170, p = 0.82$
- $P(Y > 150) = 1 - P(Y \leq 1)$ -- 注意，这时候 P 是正态分布，还不是标准化的正态分布，不好计算，所以我们进行标准化
- 标准化公式：$\frac{Y - \mu_Y}{\sigma_Y}$ ~ $N(0,1)$，因为$Y$ ~ $N(np,np(1-p))$，代入 $\mu_Y = np,\sigma_Y=\sqrt{np(1-p)}$
- 所以，$P(Y \leq 150) = \Phi(\frac{150 - np}{\sqrt{np(1-p)}}) = \Phi(\frac{150 - 170 \cdot 0.82}{\sqrt{170 \cdot 0.82 \cdot (1-0.82)}})$ --- 这里将标准正态分布的 **概率质量函数**（PMF） P 变换为了标准正态分布的**分布函数** $\Phi$
- 所以 $P(Y > 150) = 1- \Phi(0.983) = 0.017$

#### 2. 矩母函数（Moment Generating Function）

##### 2.1 概率空间：

- **均值**：        $\mathbb{E}(X) = \mu$
- **方差**：        $\mathbb{E}(X^2) - (\mathbb{E}(X))^2 = \sigma^2$
- ... ...
- **Moment**：$\mathbb{E}(X^n)$

##### 2.2 生成空间：

- **离散型**：$M(t) = \mathbb{E}(e^{tx}) = \Sigma e^{tx} \cdot P(X=x)$
- **连续型**：$M(t) = \mathbb{E}(e^{tx}) = \int_{-\infty}^{\infty} e^{tx} \cdot f(x)dx$    --- $f(x)$ 概率密度函数

**!!! 分布的矩母函数就是密度函数的一个变换!!!**

**例1：离散型分布举例**：计算泊松分布 $X$ ~ $Poi(\lambda)$ 的矩母函数

1. $m(t)=\Sigma e^{tk}\frac{\lambda^k \cdot e^{-\lambda}}{k!} = e^{-\lambda}\Sigma \frac{(e^t\lambda)^k}{k!}$
2. **泰勒级数展开形式**： $e^x = \sum_{k=0}^{\infty}\frac{x^k}{k!}$
3. $m(t)= e^{-\lambda} \cdot e^{e^t\lambda} = e^{\lambda(e^t-1)}$

**例2：连续型分布举例**：计算标准正态分布 $X$ ~ $N(0,1)$的矩母函数

1.  $m(t) = \frac{1}{\sqrt{2\pi}}\int_{-\infty}^{\infty} e^{tx}e^{-\frac{1}{2}x^2}dx = \frac{1}{\sqrt{2\pi}}\int_{-\infty}^{\infty} e^{-\frac{1}{2}(x-t)^2+\frac{1}{2}t^2}dx = \frac{1}{\sqrt{2\pi}} \cdot e^{\frac{1}{2}t^2}\int_{-\infty}^{\infty} e^{-\frac{1}{2}(x-t)^2}dx$
2. **标准正态分布的密度函数**：$f(x)=\frac{1}{\sqrt{2\pi}\sigma}exp(-\frac{1}{2\sigma^2}(x-\mu)^2)y$
3. 所以上面等式最右侧可以看作 $N(0,1)$ 的正态分布的密度函数的积分（=1）
4. 所以，$m(t)=e^{\frac{1}{2}t^2}$

**例3：指数分布举例**：

1. $m(t) = \int_0^{\infty} e^{tx} \cdot \lambda \cdot exp(-\lambda x) dx = \lambda \int_0^{\infty} e^{(t-\lambda)x}dx = \frac{\lambda}{t-\lambda} \cdot e^{(t-\lambda)x} |_0^{\infty}$
2. 可见，只有$t < \lambda$，指数分布的矩母函数才有意义，即 $m(t) = \frac{\lambda}{\lambda - t}, t < \lambda$ --- $t < \lambda$ 时，是倒数，分母正无穷，倒数为1

##### 2.3  生成空间转换为概率空间

1. **定理**：$m^{(n)}(t=0) = \mathbb{E}(X^n)$ **!!!!!!!!!!!!! 重要 !!!!!!!!!!!!!**

2. **求 $n$ 阶矩**：

- $n$ 阶矩 - $m^{(n)}(t = 0)$
- 期望$\mathbb{E}(X)$ ---> 一阶矩 ---> $m^{(1)}(t=0)$ 

- $m'(t) = \int_{-\infty}^{\infty} \frac{d}{dt}(e^{tx}) \cdot f(x) dx = \int_{-\infty}^{\infty} x \cdot (e^{tx}) \cdot f(x) dx$ -- **！！莱布尼兹积分公式**
- $m''(t) = \int_{-\infty}^{\infty} \frac{d}{dt}(x \cdot (e^{tx})) \cdot f(x) dx = \int_{-\infty}^{\infty} x \cdot \frac{d}{dt}(e^{tx}) \cdot f(x) dx = \int_{-\infty}^{\infty} x^2 \cdot (e^{tx}) \cdot f(x) dx$
- .... ...
- $m^{(n)}(t) = \int_{-\infty}^{\infty} x^n \cdot (e^{tx}) \cdot f(x) dx$

当 $t = 0$，

- $m^{(n)}(t = 0) = \int_{-\infty}^{\infty} x^n \cdot f(x) dx$ **------- 重要！！！**

3. **举例1：泊松分布的一阶矩**

- 知道泊松分布的矩母函数：$m(t) = e^{\lambda(e^t-1)}$
- 所以，$m'(t) = \frac{d}{dt} e^{\lambda(e^t-1)}$
- **根据链式法则**，$\frac{d}{dt} e^{\lambda(e^t-1)} = e^{\lambda(e^t-1)} \cdot  \frac{d}{dt}(\lambda(e^t-1)) = e^{\lambda(e^t-1)} \cdot \lambda \cdot e^t$
- 所以，代入 $t = 0$，$\mathbb{E}(X) = m'(t=0) = \lambda$
- 同理可以计算 $m''(t)$，进而计算 $\mathbb{E}(X^2) = m''(t=0) = \lambda^2 + \lambda$
- 根据方差公式 $Var(X) = \mathbb{E}(X^2) - \mathbb{E}(X)^2 = \lambda^2 + \lambda - \lambda^2 = \lambda$


#### 3.联合概率分布/边缘概率密度/条件概率密度

**定义**：
- **单点概率**：$P(x,y) = P(X=x, Y=y)$
- **二维概率分布**：$P((x,y) \in A) = \int_A f(x,y)dxdy$  ---  $f(x,y)$ 是联合分布的概率密度 PDF
- **二维高斯分布（正态分布）**：$X,Y$ ~ $N(0,1)$  --->  $f_X(x)=(\frac{1}{2\pi})exp(-\frac{1}{2}(x_1^2+x_2^2))$
- **独立性**：$P(X=x,Y=y) = P(X=x)P(Y=y)$
- **边际密度**：
	- **离散型**：$P_X(x) = \Sigma_j P(X=x,Y=y_j)$
	- **连续型**：$f_X(x) = \int_{-\infty}^{\infty}f(x,y)dy$
- **条件密度**：-- 注意条件概率和联合概率的转换
	- $P(X=x | Y=y)=\frac{P(X,y)}{P_Y(y)}$  
	- $f_{Y|X}(y|x) = \frac{f(x,y)}{f_X(x)}$

#### 4. 大数定理

- $X_1,X_2,...,X_n, \mathbb{E}(X_i) = \mu, Var(X_i)=\sigma^2$  -- i.i.d 独立同分布
- 均值 $\bar{X}$ 在 $n$ (取样数据) 趋近于无穷时候，将收敛到 $\mu$   -----> $P(|\bar{X} - \mu| > \epsilon) \to 0, n \to \infty$
	- 证明：因为 $X_i$ 独立
	- **样本均值期望**：$\mathbb{E}(\bar{X_n}) = \frac{1}{n}(\mathbb{E}(X_i) + \mathbb{E}(X_2) + ... + \mathbb{E}(X_n)) = \mu$ --- **期望的线性性质**
	- **样本均值方差**：$Var(\bar{Xn}) = \frac{1}{n^2}Var(X_i) = \frac{\sigma^2}{n}$
	- 显然，当 $n \to \infty$，$Var(\bar{Xn}) \to 0$
	- 利用 **切比雪夫不等式**，$P(|\bar{X} - \mu| \geq \epsilon) \leq \frac{Var(\bar{X_n})}{\epsilon^2} = \frac{\sigma^2}{n\epsilon^2}$
	- 显然，当 $n \to \infty$， $P(|\bar{X} - \mu| > \epsilon) \to 0$   -- **依概率收敛** 到期望（也就是不确保）
	- 即 **均值** 会收敛到 随机变量的 **期望**
	- 这也称为 “**大数法则**” 或者 "**大数定理**"

#### 5. 指数分布（泊松事件之间的时间）

- 可能发生的事件的建模
- **随机时间** T ~ exp($\lambda$)
- **密度函数**：$f(t) = \lambda \cdot e^{-\lambda t} \cdot I_{\mathbb{R}_0}(t)$ --- **注意，支撑集是大于等于0的**
- **分布函数**：$F(x) = P(X \leq x) = 1 - exp(-\lambda x) I_{x>0}$
- **举例**：灯泡寿命 100 小时，灯泡寿命服从指数分布，至少用 50 小时概率多少？
	- 因为 $\mathbb{E}(T) = \frac{1}{\lambda}$， 所以，$100 = \frac{1}{\lambda} \Rightarrow \lambda = \frac{1}{100}$
	- $P(T \geq 50) = 1 - P(T < 50) = exp(-\lambda \cdot 50) = exp(-\frac{1}{100} \cdot 50) = exp(-\frac{1}{2})$
	- **使用时间越长，概率越低**
	
![[fb2a9c14-599e-470d-a1cb-a5132f4c8f1a.png]]

- **无记忆性**：$P(T > t+s | T > s) = P(T > t)$
#### 6. 不等式

- **马尔可夫不等式**：$\mathbb{P}(|X| >= a) \leq \frac{1}{a} \cdot \mathbb{E}(|X|), a > 0$
- **切比雪夫不等式**：$\mathbb{P}(|X-E(X)| \geq c) \leq \frac{Var(X)}{c^2}$
	- **证明**：**利用马尔可夫不等式和方差定义证明**
	- $\mathbb{P}(|X-E(X)| \geq c) = P((X-E(X))^2 \geq c^2)$
	- 令 $b = c^2, Y = (X - E(X))^2$
	- **根据马尔可夫不等式**，$P(Y \geq b) \leq \frac{E(Y)}{b}$
	- 所以 $P(Y \geq c) \leq \frac{E(X)}{c^2}$
	- 又因为 $E(Y) = E((X - E(X))^2) = Var(X)$ --- **方差定义**
	- 所以，$P(Y \geq c) \leq \frac{Var(X)}{c^2}$，即 $\mathbb{P}(|X-E(X)| \geq c) \leq \frac{Var(X)}{c^2}$

#### 7. 泊松分布

![[23256d38-f392-4a60-9b11-d79e68233ad8.png]]
- 由 **伯努利分布** 扩展为 **二项分布**，进而引入中心极限定理，变化为 **正态分布**
- 泊松时间给**罕见事件**建模
- $P(X = x) = \frac{\lambda^x \cdot e^{-\lambda}}{x!} \cdot I_T(x)$
- 当 $n \to \infty, p \to 0, np \to \lambda$ ，**二项分布可以用泊松分布近似 ===> 可以证明**

#### 8. Gamma分布

- 等待第 r 个事件发生的时间，事件是泊松分布
- $T_r = w_1 + w_2 + ... + w_r$
- $T_r$ ~ $Gamma(r,\lambda)$ -- $\lambda$ 是泊松分布参数
- $P(T_r > t) = P(N_t \leq r - 1) = \Sigma_{k=0}^{r-1}\frac{e^{-\lambda t}(\lambda t)^k}{k!}$
	- $N_t$ - t 时刻泊松事件个数
- **举例**：有3条等待队列，每条队列的等待时间服从指数分布，平均等待时间是15分钟
	- 所以，$\lambda = \frac{1}{15}$
	- 因为有 3 个 队列，对应了指数分布的数量
	- 所以，T ~ $Gamma(3,\frac{1}{15})$
	- **伽马分布描述的是**：完成 $k$ 个独立同分布的指数事件所需的 **总时间**
	- $E(T) = r\lambda = 3 * 15$，也就是预计需要45分钟完成3个服务步骤
- 由此可见，**Gamma 分布 和 指数分布的关系**：
	- Gamma分布是 **$\alpha$ 个独立同分布的指数分布的总时间**，指数分布的 $\lambda = \frac{1}{\beta}$
	- $X$ ~ $Gamma(\alpha,\beta)$  -- $\alpha$ - 多少个并行的指数分布   $\beta$ - 指数分布的平均等待时间
	- $E(X) = \alpha \cdot \beta$

![[f118b83b-693d-4c3b-9525-339ac4291a0b.png]]

#### 9. 条件概率 和 贝叶斯

![[0528198e-5b00-4e4c-878b-11a7ad9969dd.png]]
- **条件概率**：$P(A|B) = \frac{P \bigcap B}{P(B)}$  ==>  $P(A \bigcap B) = P(A|B)P(B)$ ==> 导出贝叶斯
	- $P(A|B) = \frac{P \bigcap B}{P(B)}$
	- $P(B|A) = \frac{A \bigcap B}{P(A)}$
- **贝叶斯**：$P(A|B) = \frac{P(B|A)P(A)}{P(B)}$       -- $P(A)$ - 初始假设后，有新条件假如后更新概率
- **引入全概率公式**：$P(B) = P(B|A)P(A) + P(B|A^c)P(A^c)$
- **贝叶斯新的形式**：$P(A|B) = \frac{P(B|A)P(A)}{P(B|A)P(A) + P(B|A^c)P(A^c)}$ 
- 通过以上公式，在 $P(A)$ 很小（例如基础发病率很低）情况，加入检测条件 B 后对于 A 的检测率很低

